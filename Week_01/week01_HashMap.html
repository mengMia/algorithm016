<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/602263 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1094"/>

<div>
<span><div>以下参考blog：<a href="https://www.cnblogs.com/skywang12345/p/3310835.html#a21">https://www.cnblogs.com/skywang12345/p/3310835.html#a21</a></div><div>一、接口和继承关系</div><div>Map是接口</div><div>AbstractMap实现了Map接口，HashMap继承了AbstractMap这个父类</div><div>HashTable实现了Map接口-已经不怎么用了</div><div><img src="第1周 HashMap总结_files/java.util.Map (接口).png" type="image/png" data-filename="java.util.Map (接口).png" width="1045"/></div><div><br/></div><div>二、HashMap的存储</div><div>HashMap的key-value是存储在Map接口里的一个Entry数组的</div><div>jdk11源码如下</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {</font></div><div><font style="font-size: 12pt;">    final int hash;</font></div><div><font style="font-size: 12pt;">    final K key;</font></div><div><font style="font-size: 12pt;">    V value;</font></div><div><font style="font-size: 12pt;">    Node&lt;K,V&gt; next;</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    Node(int hash, K key, V value, Node&lt;K,V&gt; next) {</font></div><div><font style="font-size: 12pt;">        this.hash = hash;</font></div><div><font style="font-size: 12pt;">        this.key = key;</font></div><div><font style="font-size: 12pt;">        this.value = value;</font></div><div><font style="font-size: 12pt;">        this.next = next;</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    public final K getKey()        { return key; }</font></div><div><font style="font-size: 12pt;">    public final V getValue()      { return value; }</font></div><div><font style="font-size: 12pt;">    public final String toString() { return key + &quot;=&quot; + value; }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    public final int hashCode() {</font></div><div><font style="font-size: 12pt;">        return Objects.hashCode(key) ^ Objects.hashCode(value);</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    public final V setValue(V newValue) {</font></div><div><font style="font-size: 12pt;">        V oldValue = value;</font></div><div><font style="font-size: 12pt;">        value = newValue;</font></div><div><font style="font-size: 12pt;">        return oldValue;</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">    <font color="#DE5700">public</font> final boolean equals(Object o) {</font></div><div><font style="font-size: 12pt;">        if (o == this)</font></div><div><font style="font-size: 12pt;">            return true;</font></div><div><font style="font-size: 12pt;">        if (o instanceof Map.Entry) {</font></div><div><font style="font-size: 12pt;">            Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</font></div><div><font style="font-size: 12pt;">            if (Objects.equals(key, e.getKey()) &amp;&amp;</font></div><div><font style="font-size: 12pt;">                Objects.equals(value, e.getValue()))</font></div><div><font style="font-size: 12pt;">                return true;</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        return false;</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><span style="font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16px; color: rgb(0, 0, 0);">Entry 实际上就是一个单向链表。这也是为什么我们说HashMap是通过拉链法解决哈希冲突的。</span></div><div><span style="font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; font-size: 16px; color: rgb(0, 0, 0);">Entry 实现了Map.Entry 接口，即实现getKey(), getValue(), setValue(V value), equals(Object o), hashCode()这些函数。这些都是基本的读取/修改key、value值的函数。</span></div><div><font style="font-size: 11pt;"><font style="font-family: verdana, arial, helvetica, sans-serif;">注：java中的transient关键字：</font><span style="font-family: verdana;"><a href="https://www.cnblogs.com/lanxuezaipiao/p/3369962.html">https://www.cnblogs.com/lanxuezaipiao/p/3369962.html</a></span></font></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">三、HashMap的构造函数</font></div><div><font face="verdana, arial, helvetica, sans-serif">四个构造函数</font></div><div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">/**</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* 构造一个空的map，初始化容量大小和加载因子</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the specified initial</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* capacity and load factor.</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @param  initialCapacity the initial capacity</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @param  loadFactor      the load factor</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @throws IllegalArgumentException if the initial capacity is negative</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*         or the load factor is nonpositive</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*/</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">public HashMap(int initialCapacity, float loadFactor) {</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    if (initialCapacity &lt; 0)</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; +</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">                                           initialCapacity);</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    if (initialCapacity &gt; MAXIMUM_CAPACITY)</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        initialCapacity = MAXIMUM_CAPACITY;</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        throw new IllegalArgumentException(&quot;Illegal load factor: &quot; +</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">                                           loadFactor);</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    this.loadFactor = loadFactor;</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><font color="#353833">    this.threshold =</font> <font color="#FF0000">tableSizeFor</font><font color="#353833">(initialCapacity); //当HashMap中存储的数量达到阈值时，会将HashMap的容量加倍，标红的是个方法</font></font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">}</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><br/></font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><br/></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">/**</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* 构造一个指定容量大小的map</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the specified initial</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* capacity and the default load factor (0.75).</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @param  initialCapacity the initial capacity.</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @throws IllegalArgumentException if the initial capacity is negative.</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*/</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">public HashMap(int initialCapacity) {</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    this(initialCapacity, DEFAULT_LOAD_FACTOR);</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">}<br/></font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><br/></font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><br/></font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">/**</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* 默认构造函数</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* Constructs an empty &lt;tt&gt;HashMap&lt;/tt&gt; with the default initial capacity</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* (16) and the default load factor (0.75).</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*/</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">public HashMap() {</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    this.loadFactor = DEFAULT_LOAD_FACTOR; // all other fields defaulted</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">}</font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><br/></font></span></div><div style="color: rgb(53, 56, 51);"><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;"><br/></font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">/**</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* 包含特定子Map的</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* Constructs a new &lt;tt&gt;HashMap&lt;/tt&gt; with the same mappings as the</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* specified &lt;tt&gt;Map&lt;/tt&gt;.  The &lt;tt&gt;HashMap&lt;/tt&gt; is created with</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* default load factor (0.75) and an initial capacity sufficient to</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* hold the mappings in the specified &lt;tt&gt;Map&lt;/tt&gt;.</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @param   m the map whose mappings are to be placed in this map</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">* @throws  NullPointerException if the specified map is null</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">*/</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">public HashMap(Map&lt;? extends K, ? extends V&gt; m) {</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    this.loadFactor = DEFAULT_LOAD_FACTOR;</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    <font color="#FF0000">putMapEntries</font>(m, false); //将m中的元素逐个添加到HashMap中</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">}</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">final void <font color="#FF0000">putMapEntries</font>(Map&lt;? extends K, ? extends V&gt; m, boolean evict) {</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    int s = m.size();</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    if (s &gt; 0) {</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        if (table == null) { // pre-size</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            float ft = ((float)s / loadFactor) + 1.0F;</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            int t = ((ft &lt; (float)MAXIMUM_CAPACITY) ?</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">                     (int)ft : MAXIMUM_CAPACITY);</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            if (t &gt; threshold)</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">                threshold = tableSizeFor(t);</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        }</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        else if (s &gt; threshold)</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            resize();</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        for (Map.Entry&lt;? extends K, ? extends V&gt; e : m.entrySet()) {</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            K key = e.getKey();</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            V value = e.getValue();</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">            putVal(hash(key), key, value, false, evict);</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">        }</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">    }</font></span></div><div><span style="font-family: &quot;DejaVu Sans Mono&quot;, monospace; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><font style="font-size: 12pt;">}</font></span></div></div><br/></div><div><font color="#333333" style="font-size: 12pt;">四、主要方法</font></div><div><font color="#333333" style="font-size: 12pt;"><br/></font></div><div><font color="#333333" style="font-size: 12pt;">1.size()方法</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* Returns the number of key-value mappings in this map.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @return the number of key-value mappings in this map</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public int size() {</font></div><div><font style="font-size: 12pt;">    return size;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif" style="font-size: 12pt;"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif" style="font-size: 12pt;">2.isEmpty()方法</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* Returns &lt;tt&gt;true&lt;/tt&gt; if this map contains no key-value mappings.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @return &lt;tt&gt;true&lt;/tt&gt; if this map contains no key-value mappings</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public boolean isEmpty() {</font></div><div><font style="font-size: 12pt;">    return size == 0;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">3.get()方法</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* 返回map里key对应的value值</font></div><div><font style="font-size: 12pt;">* Returns the value to which the specified key is mapped,</font></div><div><font style="font-size: 12pt;">* or {@code null} if this map contains no mapping for the key.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* &lt;p&gt;More formally, if this map contains a mapping from a key</font></div><div><font style="font-size: 12pt;">* {@code k} to a value {@code v} such that {@code (key==null ? k==null :</font></div><div><font style="font-size: 12pt;">* key.equals(k))}, then this method returns {@code v}; otherwise</font></div><div><font style="font-size: 12pt;">* it returns {@code null}.  (There can be at most one such mapping.)</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* &lt;p&gt;A return value of {@code null} does not &lt;i&gt;necessarily&lt;/i&gt;</font></div><div><font style="font-size: 12pt;">* indicate that the map contains no mapping for the key; it's also</font></div><div><font style="font-size: 12pt;">* possible that the map explicitly maps the key to {@code null}.</font></div><div><font style="font-size: 12pt;">* The {@link #containsKey containsKey} operation may be used to</font></div><div><font style="font-size: 12pt;">* distinguish these two cases.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @see #put(Object, Object)</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public V get(Object key) {</font></div><div><font style="font-size: 12pt;">    Node&lt;K,V&gt; e;</font></div><div><font style="font-size: 12pt;">    return (e = getNode(hash(key), key)) == null ? null : e.value; </font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* </font><font style="font-size: 12pt;">返回“键为key”的键值对</font></div><div><font style="font-size: 12pt;">* Implements Map.get and related methods</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param hash hash for key</font></div><div><font style="font-size: 12pt;">* @param key the key</font></div><div><font style="font-size: 12pt;">* @return the node, or null if none</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">final Node&lt;K,V&gt; getNode(int hash, Object key) {</font></div><div><font style="font-size: 12pt;">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n; K k;</font></div><div><font style="font-size: 12pt;">    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;</font></div><div><font style="font-size: 12pt;">        (first = tab[(n - 1) &amp; hash]) != null) {</font></div><div><font style="font-size: 12pt;">        if (first.hash == hash &amp;&amp; // always check first node</font></div><div><font style="font-size: 12pt;">            ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))</font></div><div><font style="font-size: 12pt;">            return first;</font></div><div><font style="font-size: 12pt;">        if ((e = first.next) != null) {</font></div><div><font style="font-size: 12pt;">            if (first instanceof TreeNode)</font></div><div><font style="font-size: 12pt;">                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);</font></div><div><font style="font-size: 12pt;">            do {</font></div><div><font style="font-size: 12pt;">                if (e.hash == hash &amp;&amp;</font></div><div><font style="font-size: 12pt;">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</font></div><div><font style="font-size: 12pt;">                    return e;</font></div><div><font style="font-size: 12pt;">            } while ((e = e.next) != null);</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    return null;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">4.containsKey()</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* 返回是否包含指定的key，包含的话则返回true</font></div><div><font style="font-size: 12pt;">* Returns &lt;tt&gt;true&lt;/tt&gt; if this map contains a mapping for the</font></div><div><font style="font-size: 12pt;">* specified key.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param   key   The key whose presence in this map is to be tested</font></div><div><font style="font-size: 12pt;">* @return &lt;tt&gt;true&lt;/tt&gt; if this map contains a mapping for the specified</font></div><div><font style="font-size: 12pt;">* key.</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public boolean containsKey(Object key) {</font></div><div><font style="font-size: 12pt;">    return getNode(hash(key), key) != null; //首先通过getNode获取对应的Node，判断该node是否为null</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">5.containsValue()</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* 如果包含指定的value，则返回true</font></div><div><font style="font-size: 12pt;">* Returns &lt;tt&gt;true&lt;/tt&gt; if this map maps one or more keys to the</font></div><div><font style="font-size: 12pt;">* specified value.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param value value whose presence in this map is to be tested</font></div><div><font style="font-size: 12pt;">* @return &lt;tt&gt;true&lt;/tt&gt; if this map maps one or more keys to the</font></div><div><font style="font-size: 12pt;">*         specified value</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public boolean containsValue(Object value) {</font></div><div><font style="font-size: 12pt;">    Node&lt;K,V&gt;[] tab; V v;</font></div><div><font style="font-size: 12pt;">    if ((tab = table) != null &amp;&amp; size &gt; 0) {</font></div><div><font style="font-size: 12pt;">        for (int i = 0; i &lt; tab.length; ++i) {</font></div><div><font style="font-size: 12pt;">            for (Node&lt;K,V&gt; e = tab[i]; e != null; e = e.next) {</font></div><div><font style="font-size: 12pt;">                if ((v = e.value) == value ||</font></div><div><font style="font-size: 12pt;">                    (value != null &amp;&amp; value.equals(v)))</font></div><div><font style="font-size: 12pt;">                    return true;</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    return false;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">6.put()</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* Associates the specified value with the specified key in this map.</font></div><div><font style="font-size: 12pt;">* If the map previously contained a mapping for the key, the old</font></div><div><font style="font-size: 12pt;">* value is replaced.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param key key with which the specified value is to be associated</font></div><div><font style="font-size: 12pt;">* @param value value to be associated with the specified key</font></div><div><font style="font-size: 12pt;">* @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or</font></div><div><font style="font-size: 12pt;">*         &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;.</font></div><div><font style="font-size: 12pt;">*         (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that the map</font></div><div><font style="font-size: 12pt;">*         previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.)</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public V put(K key, V value) {</font></div><div><font style="font-size: 12pt;">    return <font color="#FF0000">putVal</font>(hash(key), key, value, false, true);</font></div><div><font style="font-size: 12pt;">}</font></div><div><font style="font-size: 12pt;"><br/></font></div><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* Implements Map.put and related methods</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param hash hash for key</font></div><div><font style="font-size: 12pt;">* @param key the key</font></div><div><font style="font-size: 12pt;">* @param value the value to put</font></div><div><font style="font-size: 12pt;">* @param onlyIfAbsent if true, don't change existing value</font></div><div><font style="font-size: 12pt;">* @param evict if false, the table is in creation mode.</font></div><div><font style="font-size: 12pt;">* @return previous value, or null if none</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">final V <font color="#FF0000">putVal</font>(int hash, K key, V value, boolean onlyIfAbsent,</font></div><div><font style="font-size: 12pt;">               boolean evict) {</font></div><div><font style="font-size: 12pt;">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i;</font></div><div><font style="font-size: 12pt;">    if ((tab = table) == null || (n = tab.length) == 0)</font></div><div><font style="font-size: 12pt;">        n = (tab = resize()).length;</font></div><div><font style="font-size: 12pt;">    if ((p = tab[i = (n - 1) &amp; hash]) == null)</font></div><div><font style="font-size: 12pt;">        tab[i] = newNode(hash, key, value, null);</font></div><div><font style="font-size: 12pt;">    else {</font></div><div><font style="font-size: 12pt;">        Node&lt;K,V&gt; e; K k;</font></div><div><font style="font-size: 12pt;">        if (p.hash == hash &amp;&amp;</font></div><div><font style="font-size: 12pt;">            ((k = p.key) == key || (key != null &amp;&amp; key.equals(k))))</font></div><div><font style="font-size: 12pt;">            e = p;</font></div><div><font style="font-size: 12pt;">        else if (p instanceof TreeNode)</font></div><div><font style="font-size: 12pt;">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value);</font></div><div><font style="font-size: 12pt;">        else {</font></div><div><font style="font-size: 12pt;">            for (int binCount = 0; ; ++binCount) {</font></div><div><font style="font-size: 12pt;">                if ((e = p.next) == null) {</font></div><div><font style="font-size: 12pt;">                    p.next = newNode(hash, key, value, null);</font></div><div><font style="font-size: 12pt;">                    if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st</font></div><div><font style="font-size: 12pt;">                        treeifyBin(tab, hash);</font></div><div><font style="font-size: 12pt;">                    break;</font></div><div><font style="font-size: 12pt;">                }</font></div><div><font style="font-size: 12pt;">                if (e.hash == hash &amp;&amp;</font></div><div><font style="font-size: 12pt;">                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</font></div><div><font style="font-size: 12pt;">                    break;</font></div><div><font style="font-size: 12pt;">                p = e;</font></div><div><font style="font-size: 12pt;">            }</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">        if (e != null) { // existing mapping for key</font></div><div><font style="font-size: 12pt;">            V oldValue = e.value;</font></div><div><font style="font-size: 12pt;">            if (!onlyIfAbsent || oldValue == null)</font></div><div><font style="font-size: 12pt;">                e.value = value;</font></div><div><font style="font-size: 12pt;">            afterNodeAccess(e);</font></div><div><font style="font-size: 12pt;">            return oldValue;</font></div><div><font style="font-size: 12pt;">        }</font></div><div><font style="font-size: 12pt;">    }</font></div><div><font style="font-size: 12pt;">    ++modCount;</font></div><div><font style="font-size: 12pt;">    if (++size &gt; threshold)</font></div><div><font style="font-size: 12pt;">        resize();</font></div><div><font style="font-size: 12pt;">    afterNodeInsertion(evict);</font></div><div><font style="font-size: 12pt;">    return null;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">7.putAll()</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* Copies all of the mappings from the specified map to this map.</font></div><div><font style="font-size: 12pt;">* These mappings will replace any mappings that this map had for</font></div><div><font style="font-size: 12pt;">* any of the keys currently in the specified map.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param m mappings to be stored in this map</font></div><div><font style="font-size: 12pt;">* @throws NullPointerException if the specified map is null</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public void putAll(Map&lt;? extends K, ? extends V&gt; m) {</font></div><div><font style="font-size: 12pt;">    putMapEntries(m, true);</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">8.remove()</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">/**</font></div><div><font style="font-size: 12pt;">* 删除特定键值的元素，返回的是删除之前key对应的value</font></div><div><font style="font-size: 12pt;">* Removes the mapping for the specified key from this map if present.</font></div><div><font style="font-size: 12pt;">*</font></div><div><font style="font-size: 12pt;">* @param  key key whose mapping is to be removed from the map</font></div><div><font style="font-size: 12pt;">* @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or</font></div><div><font style="font-size: 12pt;">*         &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;.</font></div><div><font style="font-size: 12pt;">*         (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that the map</font></div><div><font style="font-size: 12pt;">*         previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.)</font></div><div><font style="font-size: 12pt;">*/</font></div><div><font style="font-size: 12pt;">public V remove(Object key) {</font></div><div><font style="font-size: 12pt;">    Node&lt;K,V&gt; e;</font></div><div><font style="font-size: 12pt;">    return (e = removeNode(hash(key), key, null, false, true)) == null ?</font></div><div><font style="font-size: 12pt;">        null : e.value;</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana">五、HashMap的主要遍历方式</font></div><div><font style="font-size: 12pt;"><font face="verdana">1.</font> <span style="color: rgb(0, 0, 0); font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;">遍历HashMap的键值对</span></font></div><div><span style="font-family: verdana;"><font style="font-size: 12pt;">第一步：根据entrySet()获取HashMap的“键值对”的Set集合。</font></span></div><div><span style="font-family: verdana;"><font style="font-size: 12pt;">第二步：通过Iterator迭代器遍历“第一步”得到的集合。</font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 假设map是HashMap对象<br/></font></div><div><font style="font-size: 12pt;">// map中的key是String类型，value是Integer类型</font></div><div><font style="font-size: 12pt;">Integer integ = null;</font></div><div><font style="font-size: 12pt;">Iterator iter = map.entrySet().iterator();</font></div><div><font style="font-size: 12pt;">while(iter.hasNext()) {</font></div><div><font style="font-size: 12pt;">    Map.Entry entry = (Map.Entry)iter.next();</font></div><div><font style="font-size: 12pt;">    // 获取key</font></div><div><font style="font-size: 12pt;">    key = (String)entry.getKey();</font></div><div><font style="font-size: 12pt;">        // 获取value</font></div><div><font style="font-size: 12pt;">    integ = (Integer)entry.getValue();</font></div><div><font style="font-size: 12pt;">}</font></div></div><div><font face="verdana, arial, helvetica, sans-serif"><br/></font></div><div><font face="verdana, arial, helvetica, sans-serif">2.</font><span style="background-color: rgb(255, 255, 255); color: rgb(0, 0, 102); font-family: verdana, arial, helvetica, sans-serif; font-variant-caps: normal; font-variant-ligatures: normal;"><span style="text-indent: 0px; color: rgb(0, 0, 0); font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; line-height: 1.5;"><font style="font-size: 12pt;">遍历HashMap的键</font></span></span></div><div><span style="font-size: 12pt; font-family: unset;">第一步：</span><span style="font-size: 12pt; font-family: unset;">根据keySet()获取HashMap的“键”的Set集合。</span></div><div><span style="font-size: 12pt; font-family: unset;-en-paragraph:true;">第二步：</span><span style="font-size: 12pt; font-family: unset;-en-paragraph:true;">通过Iterator迭代器遍历“第一步”得到的集合。</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 假设map是HashMap对象</font></div><div><font style="font-size: 12pt;">// map中的key是String类型，value是Integer类型</font></div><div><font style="font-size: 12pt;">String key = null;</font></div><div><font style="font-size: 12pt;">Integer integ = null;</font></div><div><font style="font-size: 12pt;">Iterator iter = map.keySet().iterator();</font></div><div><font style="font-size: 12pt;">while (iter.hasNext()) {</font></div><div><font style="font-size: 12pt;">        // 获取key</font></div><div><font style="font-size: 12pt;">    key = (String)iter.next();</font></div><div><font style="font-size: 12pt;">        // 根据key，获取value</font></div><div><font style="font-size: 12pt;">    integ = (Integer)map.get(key);</font></div><div><font style="font-size: 12pt;">}</font></div></div><div style="margin: 10px auto; text-indent: 0px; color: rgb(0, 0, 102); font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="text-indent: 0px; color: rgb(0, 0, 0); font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; line-height: 1.5;"><font style="font-size: 12pt;">3 遍历HashMap的值</font></span></div><div style="margin: 10px auto; text-indent: 0px; color: rgb(0, 0, 102); font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12pt; background-color: transparent; font-family: unset; color: rgb(0, 0, 0);">第一步：</span><span style="font-size: 12pt; background-color: transparent; font-family: unset; color: rgb(0, 0, 0);">根据value()获取HashMap的“值”的集合。</span></div><div style="margin: 10px auto; text-indent: 0px; color: rgb(0, 0, 102); font-family: verdana, arial, helvetica, sans-serif; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: start; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><span style="font-size: 12pt; background-color: transparent; color: unset; font-family: unset;-en-paragraph:true;">第二步：</span><span style="font-size: 12pt; background-color: transparent; color: unset; font-family: unset;-en-paragraph:true;">通过Iterator迭代器遍历“第一步”得到的集合。</span></div><div style="margin-top: 1em; margin-bottom: 1em;"><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.15);-en-codeblock:true;"><div><font style="font-size: 12pt;">// 假设map是HashMap对象</font></div><div><font style="font-size: 12pt;">// map中的key是String类型，value是Integer类型</font></div><div><font style="font-size: 12pt;">Integer value = null;</font></div><div><font style="font-size: 12pt;">Collection c = map.values();</font></div><div><font style="font-size: 12pt;">Iterator iter= c.iterator();</font></div><div><font style="font-size: 12pt;">while (iter.hasNext()) {</font></div><div><font style="font-size: 12pt;">    value = (Integer)iter.next();</font></div><div><font style="font-size: 12pt;">}</font></div></div><br/></div><div style="margin-top: 1em; margin-bottom: 1em;"><b><br/></b></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;-en-paragraph:true;"><br/></span></div><div style="margin-top: 1em; margin-bottom: 1em;"><span style="font-size: 16px; color: rgb(0, 0, 0); font-weight: bold;-en-paragraph:true;"><br/></span></div></span>
</div></body></html> 